var $steps = $(".form-wizard .step"),
  $buttons = $steps.find("[data-step]"),
  $tabs = $(".header .steps .step"),
  active_step = 0;

<% if remotipart_submitted? %>

  var step_index = 1;
  var in_fade_class = (step_index > active_step) ? "fadeInRightStep" : "fadeInLeftStep";
  var out_fade_class = (in_fade_class === "fadeInRightStep") ? "fadeOutLeftStep" : "fadeOutRightStep";

  var $out_step = $steps.eq(active_step);
  $out_step.on(utils.animation_ends(), function () {
    $out_step.removeClass("fadeInRightStep fadeInLeftStep fadeOutRightStep fadeOutLeftStep");
  }).addClass(out_fade_class);

  active_step = step_index;

  $tabs.removeClass("active").filter(":lt(" + (active_step + 1) + ")").addClass("active");

  $steps.removeClass("active");
  $steps.eq(step_index).addClass("active animated " + in_fade_class);

  $('.form-wizard').html("<%= j render(:partial => 'products/import') %>");
<% else %>

  $(".form-wizard .form-group .error").text('Please upload a source file');
  $(".form-wizard .form-group .error").css({'display': ''});
<% end %>
